<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#c0392b">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Menta5deer">
    <link rel="apple-touch-icon" href="icon.png">

    <title>Menta5deer</title>
    <style>
        :root {
            --primary: #c0392b; 
            --accent: #27ae60;
            --bg: #f8f9fa;
            --white: #ffffff;
            --whatsapp: #25D366;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px;
        }

        .container {
            background: var(--white);
            padding: 2rem;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            margin-bottom: 20px;
            background: #f1f2f6;
            color: #57606f;
            font-weight: bold;
        }

        .main-trigger {
            width: 100%;
            padding: 25px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 0 #962d22;
            transition: all 0.1s;
            margin-bottom: 25px;
        }

        .main-trigger:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #962d22;
        }

        .input-group { 
            margin-bottom: 20px; 
            text-align: right;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        
        label { display: block; font-size: 14px; color: #7f8c8d; margin-bottom: 8px; }

        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            background: #fff;
            cursor: pointer;
        }

        #result {
            margin-top: 10px;
            text-align: right;
        }

        .contact-card {
            background: #fff;
            border: 1px solid #edf2f7;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .contact-info b { display: block; color: #2d3436; font-size: 18px; }
        .contact-info span { font-family: monospace; color: #636e72; font-size: 15px; }

        .actions { display: flex; gap: 5px; }
        .btn-sm {
            padding: 8px 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            text-decoration: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-copy { background: #dfe6e9; color: #2d3436; }
        .btn-call { background: #2ecc71; color: white; }
        .btn-wa { background: var(--whatsapp); color: white; }

        .footer-note {
            margin-top: 20px;
            font-size: 11px;
            color: #95a5a6;
            text-align: center;
            line-height: 1.6;
        }
        .footer-note a { color: var(--accent); text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div id="timeStatus" class="status-badge">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...</div>
    <button class="main-trigger" onclick="processRequest()">Ù…ÙŠÙ† ØªØ®Ø¯ÙŠØ±ØŸ</button>
    
    <div class="input-group">
        <label>Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† ÙŠÙˆÙ… Ø¢Ø®Ø±:</label>
        <select id="daySelect" onchange="processRequest()">
            <option value="today">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ</option>
            <option value="Ø§Ù„Ø³Ø¨Øª">Ø§Ù„Ø³Ø¨Øª</option>
            <option value="Ø§Ù„Ø£Ø­Ø¯">Ø§Ù„Ø£Ø­Ø¯</option>
            <option value="Ø§Ù„Ø§Ø«Ù†ÙŠÙ†">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
            <option value="Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option>
            <option value="Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option>
            <option value="Ø§Ù„Ø®Ù…ÙŠØ³">Ø§Ù„Ø®Ù…ÙŠØ³</option>
            <option value="Ø§Ù„Ø¬Ù…Ø¹Ø©">Ø§Ù„Ø¬Ù…Ø¹Ø© (Ø§Ù„Ø­Ø§Ù„ÙŠØ©)</option>
            <option value="nextFriday">Ø§Ù„Ø¬Ù…Ø¹Ø© Ø§Ù„Ø¬Ø§ÙŠØ©</option>
        </select>
    </div>
    <div id="result"></div>
</div>

<div class="footer-note">
    Made by Dr. Abdow â€¢ Menta5deer v1.0 <br>
    <a href="https://wa.me/201550086024" target="_blank">Send Feedback via WhatsApp</a>
</div>

<script>
    const directory = {
        "Ù…Ø­Ù…ÙˆØ¯ Ø¹Ø²Øª": "01024772356", "Ø­Ø³Ø§Ù…": "01287993774", "Ù…Ø­Ù…Ø¯ ÙØ¤Ø§Ø¯": "01020274239",
        "Ø£Ø­Ù…Ø¯ Ø·Ø§Ø±Ù‚": "01022176649", "Ø¹Ø¨Ø¯Ø§Ù„ØºÙ†ÙŠ": "01123676274", "Ù…Ø­Ù…Ø¯ Ù‡Ø±Ø§Ø³": "01021681919",
        "Ø³Ø§Ø±Ø© ÙØ§ÙŠØ¯": "01147341375", "Ø³Ù„Ù…Ù‰": "01286443285", "Ø¹Ù…Ø± Ø§Ù„Ø­ÙŠØª": "01092832062",
        "Ø¬Ù‡Ø§Ø¯": "01010799643", "Ø£Ø­Ù…Ø¯ Ø§Ù„ÙØ§Ø±": "01019202321", "Ø£Ø­Ù…Ø¯ Ø¹ÙŠØ³Ù‰": "01026512389",
        "Ø¢ÙŠØ© Ø¬Ù…Ø§Ù„": "01159716507", "Ù†Ù‡Ø§Ø¯": "01022187178", "Ø±ÙˆØ§Ù†": "01091051651"
    };

    const emergencyMornings = {
        "Ø§Ù„Ø³Ø¨Øª": ["Ø£Ø­Ù…Ø¯ Ø§Ù„ÙØ§Ø±"], "Ø§Ù„Ø£Ø­Ø¯": ["Ø³Ù„Ù…Ù‰"], "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†": ["Ù…Ø­Ù…ÙˆØ¯ Ø¹Ø²Øª"],
        "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡": ["Ø¢ÙŠØ© Ø¬Ù…Ø§Ù„"], "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡": ["Ø¬Ù‡Ø§Ø¯"], "Ø§Ù„Ø®Ù…ÙŠØ³": ["Ø¹Ù…Ø± Ø§Ù„Ø­ÙŠØª"]
    };

    const onCallGroups = {
        "Ø§Ù„Ø³Ø¨Øª": ["Ù†Ù‡Ø§Ø¯", "Ø£Ø­Ù…Ø¯ Ø§Ù„ÙØ§Ø±", "Ø£Ø­Ù…Ø¯ Ø¹ÙŠØ³Ù‰", "Ø±ÙˆØ§Ù†", "Ø¢ÙŠØ© Ø¬Ù…Ø§Ù„"],
        "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡": ["Ù†Ù‡Ø§Ø¯", "Ø£Ø­Ù…Ø¯ Ø§Ù„ÙØ§Ø±", "Ø£Ø­Ù…Ø¯ Ø¹ÙŠØ³Ù‰", "Ø±ÙˆØ§Ù†", "Ø¢ÙŠØ© Ø¬Ù…Ø§Ù„"],
        "Ø§Ù„Ø£Ø­Ø¯": ["Ù…Ø­Ù…Ø¯ Ù‡Ø±Ø§Ø³", "Ø¹Ù…Ø± Ø§Ù„Ø­ÙŠØª", "Ø¬Ù‡Ø§Ø¯", "Ø³Ù„Ù…Ù‰", "Ø³Ø§Ø±Ø© ÙØ§ÙŠØ¯"],
        "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡": ["Ù…Ø­Ù…Ø¯ Ù‡Ø±Ø§Ø³", "Ø¹Ù…Ø± Ø§Ù„Ø­ÙŠØª", "Ø¬Ù‡Ø§Ø¯", "Ø³Ù„Ù…Ù‰", "Ø³Ø§Ø±Ø© ÙØ§ÙŠØ¯"],
        "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†": ["Ø­Ø³Ø§Ù…", "Ø£Ø­Ù…Ø¯ Ø·Ø§Ø±Ù‚", "Ø¹Ø¨Ø¯Ø§Ù„ØºÙ†ÙŠ", "Ù…Ø­Ù…ÙˆØ¯ Ø¹Ø²Øª", "Ù…Ø­Ù…Ø¯ ÙØ¤Ø§Ø¯"],
        "Ø§Ù„Ø®Ù…ÙŠØ³": ["Ø­Ø³Ø§Ù…", "Ø£Ø­Ù…Ø¯ Ø·Ø§Ø±Ù‚", "Ø¹Ø¨Ø¯Ø§Ù„ØºÙ†ÙŠ", "Ù…Ø­Ù…ÙˆØ¯ Ø¹Ø²Øª", "Ù…Ø­Ù…Ø¯ ÙØ¤Ø§Ø¯"]
    };

    // Rotation logic for Fridays
    function getFridayGroup(date) {
        // Reference Friday: Jan 23, 2026 was Saturday/Tuesday group (index 2)
        // Jan 30, 2026 (tomorrow) is Sunday/Wednesday group (index 0)
        const refFriday = new Date(2026, 0, 30); 
        const cycle = ["Ø§Ù„Ø£Ø­Ø¯", "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø³Ø¨Øª"]; // Represents the groups
        
        const diffInMs = date - refFriday;
        const diffInWeeks = Math.floor(diffInMs / (7 * 24 * 60 * 60 * 1000));
        
        // Ensure index is positive for modulo
        let index = diffInWeeks % 3;
        if (index < 0) index += 3;
        
        return onCallGroups[cycle[index]];
    }

    function updateTimeDisplay() {
        const now = new Date();
        const hr = now.getHours();
        const day = now.getDay(); // 5 is Friday, 6 is Saturday

        let status = "";
        // If it's Saturday before 8 AM, it's still Friday's on-call
        if (day === 6 && hr < 8) {
            status = "ğŸŒ‘ Ù†Ø¨Ø·Ø´ÙŠØ© Ø§Ù„Ø¬Ù…Ø¹Ø© (Ù…Ø³ØªÙ…Ø±Ø©)";
        } else if (hr >= 8 && hr < 13.5 && day !== 5) {
            status = "â˜€ï¸ ÙØªØ±Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©";
        } else {
            status = "ğŸŒ‘ ÙØªØ±Ø© Ø§Ù„Ù†Ø¨Ø·Ø´ÙŠØ© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©";
        }
        document.getElementById('timeStatus').innerText = status;
    }
    
    setInterval(updateTimeDisplay, 60000); 
    updateTimeDisplay();

    function copyToClipboard(text, btn) {
        navigator.clipboard.writeText(text);
        const originalText = btn.innerText;
        btn.innerText = "ØªÙ…!";
        setTimeout(() => { btn.innerText = originalText; }, 1500);
    }

    function processRequest() {
        const selectedDay = document.getElementById('daySelect').value;
        const daysArr = ["Ø§Ù„Ø£Ø­Ø¯", "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", "Ø§Ù„Ø®Ù…ÙŠØ³", "Ø§Ù„Ø¬Ù…Ø¹Ø©", "Ø§Ù„Ø³Ø¨Øª"];
        const now = new Date();
        const hr = now.getHours();
        
        let targetDate = new Date();
        let targetDayName = selectedDay === "today" ? daysArr[now.getDay()] : selectedDay;

        // Logic for "Today"
        if (selectedDay === "today") {
            // Check if we are in the Saturday 00:00 - 08:00 window (Friday continues)
            if (now.getDay() === 6 && hr < 8) {
                const prevDate = new Date();
                prevDate.setDate(now.getDate() - 1);
                renderList(getFridayGroup(prevDate));
                return;
            }
            
            if (now.getDay() === 5) { // It's Friday
                renderList(getFridayGroup(now));
                return;
            }

            const isMorning = hr >= 8 && hr < 13.5;
            renderList(isMorning ? (emergencyMornings[targetDayName] || []) : (onCallGroups[targetDayName] || []));
            return;
        }

        // Logic for specific future Friday
        if (selectedDay === "nextFriday") {
            const nextFri = new Date();
            nextFri.setDate(now.getDate() + (5 + 7 - now.getDay()) % 7);
            if (now.getDay() === 5) nextFri.setDate(nextFri.getDate() + 7);
            renderList(getFridayGroup(nextFri));
            return;
        }

        // Logic for other specific days
        if (selectedDay === "Ø§Ù„Ø¬Ù…Ø¹Ø©") {
            let thisFri = new Date();
            thisFri.setDate(now.getDate() + (5 - now.getDay()));
            renderList(getFridayGroup(thisFri));
        } else {
            renderList([...(emergencyMornings[selectedDay] || []), ...(onCallGroups[selectedDay] || [])]);
        }
    }

    function renderList(names) {
        const resultDiv = document.getElementById('result');
        if (!names || names.length === 0) {
            resultDiv.innerHTML = `<div class="empty-msg">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ Ù…Ø³Ø¬Ù„ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙˆÙ‚Øª</div>`;
        } else {
            let html = "";
            [...new Set(names)].forEach(n => {
                const phone = directory[n] || "";
                html += `
                    <div class="contact-card">
                        <div class="contact-info">
                            <b>${n}</b>
                            <span>${phone}</span>
                        </div>
                        <div class="actions">
                            <button class="btn-sm btn-copy" onclick="copyToClipboard('${phone}', this)">Ù†Ø³Ø®</button>
                            ${phone ? `<a href="https://wa.me/2${phone}" target="_blank" class="btn-sm btn-wa">ÙˆØ§ØªØ³Ø§Ø¨</a>` : ''}
                            ${phone ? `<a href="tel:${phone}" class="btn-sm btn-call">Ø§ØªØµØ§Ù„</a>` : ''}
                        </div>
                    </div>`;
            });
            resultDiv.innerHTML = html;
        }
    }

    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js').catch(err => console.log("SW error", err));
        });
    }
</script>
</body>
</html> 